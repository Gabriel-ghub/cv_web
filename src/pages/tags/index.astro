---
import BreadCrumbs from "../../components/BreadCrumbs.astro";
import IconSVG from "../../components/IconSVG.astro";
import BlogLayout from "../../layouts/BlogLayout.astro";
const allPosts = await Astro.glob("../posts/*.mdx");
const uniqueTags = allPosts.reduce((acc, current, index) => {
  if (index === 0) {
    return [
      {
        url: current.frontmatter.url,
        icon: current.frontmatter.icon,
      },
    ];
  }
  if (acc[acc.length - 1].url === current.frontmatter.url) {
    return acc;
  }
  return [
    ...acc,
    {
      url: current.frontmatter.url,
      icon: current.frontmatter.icon,
    },
  ];
}, []);
---

<BlogLayout
  title="Blog sobre Desarrollo web"
  metaDescription="Blog sobre Desarrollo web"
>
  <Fragment slot="breadcrumbs">
    <BreadCrumbs
      links={[
        {
          page: "Inicio",
          url: "/blog",
        },
        {
          page: "Tags",
          url: "/tags",
          current: true,
        },
      ]}
    />
  </Fragment>
  <Fragment slot="center-title">Explora los posts por categoría</Fragment>

  <Fragment slot="blog-center">
    <div class="flex flex-col gap-y-8">
      <div>
        <p>
          Aquí encontrarás todos los lenguajes, frameworks y herramientas con
          los que he tenido mis batallas.
        </p>
        <p>
          Sí, sí, lo sé, por ahora son pocas... ¡pero créeme, no son todas! Iré
          agregando más poco a poco.
        </p>
      </div>
    </div>
  </Fragment>
  <Fragment slot="blog-footer">
    <div class="flex flex-col gap-y-3">
      <h2 class="text-3xl">Categorías</h2>
      <div>
        <ul class="flex">
          {
            uniqueTags.map((tag) => {
              return (
                <li>
                  <a
                    class="font-semibold capitalize underline
                      flex gap-2 border hover:border-lime transition-all rounded items-center py-1 px-3"
                    href={`/tags/${tag.url.toLowerCase()}`}
                  >
                    <IconSVG iconData={[{ name: tag.icon, size: "20" }]} />
                    {tag.url}
                  </a>
                </li>
              );
            })
          }
        </ul>
      </div>
    </div>
  </Fragment>

  <Fragment slot="sidebar"></Fragment>
</BlogLayout>
